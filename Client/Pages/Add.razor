@page "/add"

@using CloudCopy.Shared.Forms

@inject HttpClient HttpClient
@inject NavigationManager NavigationManager

<div class="row">
    <div class="col-xl-6">
        <div class="row">
            <div class="col">
                <RadzenTemplateForm TItem="CopiedForm" Data=@model Submit=@(async () => await OnSubmitAsync(model))>
                    <RadzenFieldset Text="Add">
                        <div class="row" style="margin-bottom: 48px">
                            <div class="col-md-4 align-right">
                                <RadzenLabel Text="Copied Text" />
                            </div>
                            <div class="col">
                                <RadzenTextBox style="display: block" Name="Text" @bind-Value=@model.Body />
                                <RadzenRequiredValidator Component="Text" Text="Copeid text is required" Popup=false Style="position: absolute"/>
                            </div>
                        </div>
                        <RadzenButton ButtonType="ButtonType.Submit" Text="Submit" ></RadzenButton>
                    </RadzenFieldset>
                </RadzenTemplateForm>
            </div>
        </div>
    </div>
</div>

@code
{
    CopiedForm model = new CopiedForm();

    async Task OnSubmitAsync(CopiedForm model)
    {
        await HttpClient.GetAsync($"v1/Copied/Create/{model.Body}");

        NavigationManager.NavigateTo("/");
    }
}
